<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RT2_Assignment1: src/service.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RT2_Assignment1
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Documentation for Assignmet</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">service.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Node to manage the correct drive mode according to the user choice.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;ros/ros.h&quot;</code><br />
<code>#include &quot;std_srvs/Empty.h&quot;</code><br />
<code>#include &quot;assignment/Service.h&quot;</code><br />
<code>#include &quot;sensor_msgs/LaserScan.h&quot;</code><br />
<code>#include &quot;geometry_msgs/Twist.h&quot;</code><br />
<code>#include &quot;stdio.h&quot;</code><br />
<code>#include &quot;string.h&quot;</code><br />
<code>#include &quot;move_base_msgs/MoveBaseActionGoal.h&quot;</code><br />
<code>#include &quot;geometry_msgs/PointStamped.h&quot;</code><br />
<code>#include &quot;move_base_msgs/MoveBaseActionFeedback.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for service.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="service_8cpp__incl.png" border="0" usemap="#src_2service_8cpp" alt=""/></div>
<map name="src_2service_8cpp" id="src_2service_8cpp">
<area shape="rect" title="Node to manage the correct drive mode according to the user choice." alt="" coords="765,5,884,32"/>
<area shape="rect" title=" " alt="" coords="5,87,84,114"/>
<area shape="rect" title=" " alt="" coords="108,87,240,114"/>
<area shape="rect" title=" " alt="" coords="265,87,427,114"/>
<area shape="rect" title=" " alt="" coords="451,87,641,114"/>
<area shape="rect" title=" " alt="" coords="665,87,841,114"/>
<area shape="rect" title=" " alt="" coords="865,87,931,114"/>
<area shape="rect" title=" " alt="" coords="956,87,1027,114"/>
<area shape="rect" title=" " alt="" coords="1051,80,1303,121"/>
<area shape="rect" title=" " alt="" coords="1327,87,1562,114"/>
<area shape="rect" title=" " alt="" coords="1587,80,1839,121"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a70ed59adcb4159ac551058053e649640"><td class="memItemLeft" align="right" valign="top"><a id="a70ed59adcb4159ac551058053e649640"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SIZE</b>&#160;&#160;&#160;144</td></tr>
<tr class="separator:a70ed59adcb4159ac551058053e649640"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13d252428836cb17e8183d427299d370"><td class="memItemLeft" align="right" valign="top"><a id="a13d252428836cb17e8183d427299d370"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>th</b>&#160;&#160;&#160;0.5</td></tr>
<tr class="separator:a13d252428836cb17e8183d427299d370"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae62a5b19571be315331b379784dc04ba"><td class="memItemLeft" align="right" valign="top"><a id="ae62a5b19571be315331b379784dc04ba"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>wth</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ae62a5b19571be315331b379784dc04ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a890521a70172978804cdaf281c4b5058"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#a890521a70172978804cdaf281c4b5058">setPoseParams</a> (float inX, float inY)</td></tr>
<tr class="memdesc:a890521a70172978804cdaf281c4b5058"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to set the goal of the robot.  <a href="service_8cpp.html#a890521a70172978804cdaf281c4b5058">More...</a><br /></td></tr>
<tr class="separator:a890521a70172978804cdaf281c4b5058"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6911e3fbd406f287be9ab539f0459c0a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#a6911e3fbd406f287be9ab539f0459c0a">cancelGoal</a> ()</td></tr>
<tr class="memdesc:a6911e3fbd406f287be9ab539f0459c0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to delete the actual goal.  <a href="service_8cpp.html#a6911e3fbd406f287be9ab539f0459c0a">More...</a><br /></td></tr>
<tr class="separator:a6911e3fbd406f287be9ab539f0459c0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60a61cb42ee062b6782bcc39a63aa3bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#a60a61cb42ee062b6782bcc39a63aa3bf">takeStatus</a> (const move_base_msgs::MoveBaseActionFeedback::ConstPtr &amp;msg)</td></tr>
<tr class="memdesc:a60a61cb42ee062b6782bcc39a63aa3bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to take the status: goal ID.  <a href="service_8cpp.html#a60a61cb42ee062b6782bcc39a63aa3bf">More...</a><br /></td></tr>
<tr class="separator:a60a61cb42ee062b6782bcc39a63aa3bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b3a86d9513c00df95a3019351e00061"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#a7b3a86d9513c00df95a3019351e00061">currGoal</a> (const move_base_msgs::MoveBaseActionGoal::ConstPtr &amp;m)</td></tr>
<tr class="memdesc:a7b3a86d9513c00df95a3019351e00061"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to store the current goal the robot has to rach.  <a href="service_8cpp.html#a7b3a86d9513c00df95a3019351e00061">More...</a><br /></td></tr>
<tr class="separator:a7b3a86d9513c00df95a3019351e00061"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c38b7bf238ee6a4bd51cfe140c3d87f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#a2c38b7bf238ee6a4bd51cfe140c3d87f">takeVel</a> (const geometry_msgs::Twist::ConstPtr &amp;m)</td></tr>
<tr class="memdesc:a2c38b7bf238ee6a4bd51cfe140c3d87f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to take the current velocity of the robot.  <a href="service_8cpp.html#a2c38b7bf238ee6a4bd51cfe140c3d87f">More...</a><br /></td></tr>
<tr class="separator:a2c38b7bf238ee6a4bd51cfe140c3d87f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a0e843767aeea4f433a28b9c54f573a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#a2a0e843767aeea4f433a28b9c54f573a">menu</a> ()</td></tr>
<tr class="memdesc:a2a0e843767aeea4f433a28b9c54f573a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to display infos about how to enter a valid position for the goal the robot has to reach.  <a href="service_8cpp.html#a2a0e843767aeea4f433a28b9c54f573a">More...</a><br /></td></tr>
<tr class="separator:a2a0e843767aeea4f433a28b9c54f573a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0dfddff71559c8451ffd82cf1bb34e6"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#ae0dfddff71559c8451ffd82cf1bb34e6">min_val</a> (double a[])</td></tr>
<tr class="memdesc:ae0dfddff71559c8451ffd82cf1bb34e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to compute the minimul valie among an array.  <a href="service_8cpp.html#ae0dfddff71559c8451ffd82cf1bb34e6">More...</a><br /></td></tr>
<tr class="separator:ae0dfddff71559c8451ffd82cf1bb34e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74eeefdaefa8e5ec4b48c6209aaeb02f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#a74eeefdaefa8e5ec4b48c6209aaeb02f">manuallyDrive</a> (char input)</td></tr>
<tr class="memdesc:a74eeefdaefa8e5ec4b48c6209aaeb02f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to enable/disable or quit the manual drive.  <a href="service_8cpp.html#a74eeefdaefa8e5ec4b48c6209aaeb02f">More...</a><br /></td></tr>
<tr class="separator:a74eeefdaefa8e5ec4b48c6209aaeb02f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad92a1ab439081fef6e6c319e774e907f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#ad92a1ab439081fef6e6c319e774e907f">driveAssist</a> (const sensor_msgs::LaserScan::ConstPtr &amp;m)</td></tr>
<tr class="memdesc:ad92a1ab439081fef6e6c319e774e907f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to assit the robot while driving.  <a href="service_8cpp.html#ad92a1ab439081fef6e6c319e774e907f">More...</a><br /></td></tr>
<tr class="separator:ad92a1ab439081fef6e6c319e774e907f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cdd6d065ca78e45cb762ecfcb2935e7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#a8cdd6d065ca78e45cb762ecfcb2935e7">setDriveMod</a> (assignment::Service::Request &amp;req, assignment::Service::Response &amp;res)</td></tr>
<tr class="memdesc:a8cdd6d065ca78e45cb762ecfcb2935e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to set the drive modality according to the user input.  <a href="service_8cpp.html#a8cdd6d065ca78e45cb762ecfcb2935e7">More...</a><br /></td></tr>
<tr class="separator:a8cdd6d065ca78e45cb762ecfcb2935e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:a3c04138a5bfe5d72780bb7e82a18e627"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function of the node.  <a href="service_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">More...</a><br /></td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a1e08fee95303ef1c51d7369649b0fb1c"><td class="memItemLeft" align="right" valign="top"><a id="a1e08fee95303ef1c51d7369649b0fb1c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#a1e08fee95303ef1c51d7369649b0fb1c">assistDrive</a> = false</td></tr>
<tr class="memdesc:a1e08fee95303ef1c51d7369649b0fb1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variable to manage the drive assistance activation. <br /></td></tr>
<tr class="separator:a1e08fee95303ef1c51d7369649b0fb1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3039562ceac7fca79eec81d1561b228"><td class="memItemLeft" align="right" valign="top"><a id="ac3039562ceac7fca79eec81d1561b228"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#ac3039562ceac7fca79eec81d1561b228">manual</a> = false</td></tr>
<tr class="memdesc:ac3039562ceac7fca79eec81d1561b228"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variable to manage the manual drive activation. <br /></td></tr>
<tr class="separator:ac3039562ceac7fca79eec81d1561b228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc50817b9a5196dce387a27280cf2c2c"><td class="memItemLeft" align="right" valign="top"><a id="adc50817b9a5196dce387a27280cf2c2c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#adc50817b9a5196dce387a27280cf2c2c">G</a> = false</td></tr>
<tr class="memdesc:adc50817b9a5196dce387a27280cf2c2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variable to determine the presence of a goal. <br /></td></tr>
<tr class="separator:adc50817b9a5196dce387a27280cf2c2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a350594df3e8f6948c8462edfd41ce086"><td class="memItemLeft" align="right" valign="top"><a id="a350594df3e8f6948c8462edfd41ce086"></a>
ros::Publisher&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#a350594df3e8f6948c8462edfd41ce086">pub</a></td></tr>
<tr class="memdesc:a350594df3e8f6948c8462edfd41ce086"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defining a publisher for the goal publication. <br /></td></tr>
<tr class="separator:a350594df3e8f6948c8462edfd41ce086"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af16f3cb6a089096b01458711b8a6eebb"><td class="memItemLeft" align="right" valign="top"><a id="af16f3cb6a089096b01458711b8a6eebb"></a>
ros::Publisher&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#af16f3cb6a089096b01458711b8a6eebb">pubCancel</a></td></tr>
<tr class="memdesc:af16f3cb6a089096b01458711b8a6eebb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defining a publisher for the goal deletion. <br /></td></tr>
<tr class="separator:af16f3cb6a089096b01458711b8a6eebb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc3d127c97446f878d9550daf52cdb06"><td class="memItemLeft" align="right" valign="top"><a id="acc3d127c97446f878d9550daf52cdb06"></a>
ros::Publisher&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#acc3d127c97446f878d9550daf52cdb06">pubV</a></td></tr>
<tr class="memdesc:acc3d127c97446f878d9550daf52cdb06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defining a publisher for the velocity publication. <br /></td></tr>
<tr class="separator:acc3d127c97446f878d9550daf52cdb06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d019b1517126a1fe3e5c258ffdf23b6"><td class="memItemLeft" align="right" valign="top"><a id="a3d019b1517126a1fe3e5c258ffdf23b6"></a>
move_base_msgs::MoveBaseActionGoal&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#a3d019b1517126a1fe3e5c258ffdf23b6">pose</a></td></tr>
<tr class="memdesc:a3d019b1517126a1fe3e5c258ffdf23b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variable to store the position of the robot. <br /></td></tr>
<tr class="separator:a3d019b1517126a1fe3e5c258ffdf23b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36975d8f325eddfc16c5c17bd6116efd"><td class="memItemLeft" align="right" valign="top"><a id="a36975d8f325eddfc16c5c17bd6116efd"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#a36975d8f325eddfc16c5c17bd6116efd">goalID</a></td></tr>
<tr class="memdesc:a36975d8f325eddfc16c5c17bd6116efd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variable to store the goal ID of the robot. <br /></td></tr>
<tr class="separator:a36975d8f325eddfc16c5c17bd6116efd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c985d62869c1ba5fb80c7f01dff1f0b"><td class="memItemLeft" align="right" valign="top"><a id="a1c985d62869c1ba5fb80c7f01dff1f0b"></a>
actionlib_msgs::GoalID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#a1c985d62869c1ba5fb80c7f01dff1f0b">goalToCancel</a></td></tr>
<tr class="memdesc:a1c985d62869c1ba5fb80c7f01dff1f0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variaible to store the ID of the goal that has to be deleted. <br /></td></tr>
<tr class="separator:a1c985d62869c1ba5fb80c7f01dff1f0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8b22358bb104a13cb2016985daa07eb"><td class="memItemLeft" align="right" valign="top"><a id="ad8b22358bb104a13cb2016985daa07eb"></a>
geometry_msgs::Twist&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#ad8b22358bb104a13cb2016985daa07eb">n</a></td></tr>
<tr class="memdesc:ad8b22358bb104a13cb2016985daa07eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variable as message to pass data with a proper format. <br /></td></tr>
<tr class="separator:ad8b22358bb104a13cb2016985daa07eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add752d850860e74bb9d4b65aa31f1140"><td class="memItemLeft" align="right" valign="top"><a id="add752d850860e74bb9d4b65aa31f1140"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#add752d850860e74bb9d4b65aa31f1140">xG</a></td></tr>
<tr class="memdesc:add752d850860e74bb9d4b65aa31f1140"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variable to store the x-coordinate of the position inserted by the user. <br /></td></tr>
<tr class="separator:add752d850860e74bb9d4b65aa31f1140"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93b1a89dbf18ea027073e19a2a0adbbe"><td class="memItemLeft" align="right" valign="top"><a id="a93b1a89dbf18ea027073e19a2a0adbbe"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service_8cpp.html#a93b1a89dbf18ea027073e19a2a0adbbe">yG</a></td></tr>
<tr class="memdesc:a93b1a89dbf18ea027073e19a2a0adbbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variable to store the y-coordinate of the position inserted by the user. <br /></td></tr>
<tr class="separator:a93b1a89dbf18ea027073e19a2a0adbbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Node to manage the correct drive mode according to the user choice. </p>
<dl class="section author"><dt>Author</dt><dd>Matteo Maragliano </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>27/02/2022 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6911e3fbd406f287be9ab539f0459c0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6911e3fbd406f287be9ab539f0459c0a">&#9670;&nbsp;</a></span>cancelGoal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cancelGoal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to delete the actual goal. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7b3a86d9513c00df95a3019351e00061"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b3a86d9513c00df95a3019351e00061">&#9670;&nbsp;</a></span>currGoal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void currGoal </td>
          <td>(</td>
          <td class="paramtype">const move_base_msgs::MoveBaseActionGoal::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to store the current goal the robot has to rach. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>message from which infos regarding the robot's position are taken</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>The function is used to take the robot goal in order to make it available to the program to perform particular actions: for example the check of the distance to allow the program delete it, or also to state that a particular position (x,y) inserted is not reachable by the robot. </p>

</div>
</div>
<a id="ad92a1ab439081fef6e6c319e774e907f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad92a1ab439081fef6e6c319e774e907f">&#9670;&nbsp;</a></span>driveAssist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void driveAssist </td>
          <td>(</td>
          <td class="paramtype">const sensor_msgs::LaserScan::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to assit the robot while driving. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>message containing all the distances of the obstacles detected by the robot's sensors</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>The function is used to assist the robot while it is driving. In particular the function checks that the assist drive modality in enabled (if not it quits) then stores the distances value into an array with a proper dimension; then it divides this array into 5 sub arrays (with dimension 144) in order to have different intervals to check. Once that all the data are ready for the program, at each iteration the function checks that the distance of the minimum value of the array is greater than a threshold (choosen by the programmer and defined as a DEFINE at the beginning of the program); if the threshold is greater then the program follows the normal flow, otherwise the function sets the linear and angular velocity to zero and publish them to stop the robot thus avoiding a collision Of course this step are computed for each sub array defined: the threshold may vary if choosen differently. </p>

</div>
</div>
<a id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function of the node. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a74eeefdaefa8e5ec4b48c6209aaeb02f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74eeefdaefa8e5ec4b48c6209aaeb02f">&#9670;&nbsp;</a></span>manuallyDrive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void manuallyDrive </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>input</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to enable/disable or quit the manual drive. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>char that represents the command the user has inserted</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>The function is used to enable, disable or quit the manual drive for the robot. In particular there is a switch that takes as parameter a character inserted by the user. First of all the global variable manual is set to true to allow the user drive the robot with the keyboard; then depending on the value read it is changed the value of the global variable assistDrive (true when enabled, false when disabled) in order to allow the program having or not the assistance during the drive. At the end, when the user inserts the quit command (q) the function sets to false all the two global variables, sets also to 0 the linear and angular velocity of the robot and publishes them to stop the robot moving. </p>

</div>
</div>
<a id="a2a0e843767aeea4f433a28b9c54f573a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a0e843767aeea4f433a28b9c54f573a">&#9670;&nbsp;</a></span>menu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void menu </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to display infos about how to enter a valid position for the goal the robot has to reach. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae0dfddff71559c8451ffd82cf1bb34e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0dfddff71559c8451ffd82cf1bb34e6">&#9670;&nbsp;</a></span>min_val()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double min_val </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>a</em>[]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to compute the minimul valie among an array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a[]</td><td>an array of double that contains values representing the distances</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>min_val the minimum value that is contained inside the array</dd></dl>
<p>The functon is used to compute the minimum value among an array with a certain dimension. In particular, each array element represents the distance from an obstacle that is detected by the laser scan. The robot is provided with 720 sensors, so the array will have that dimension (SIZE in the function); the maximum distance that the robot can detect is 30 and this is the value that is set as the minimim inside the dist variable of the function. For each element inside of the array the function compares it with the dist variable and if it is lower that this one then it is updated with the new minimum value. At the end of the execution the function returns the minimum value. </p>

</div>
</div>
<a id="a8cdd6d065ca78e45cb762ecfcb2935e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cdd6d065ca78e45cb762ecfcb2935e7">&#9670;&nbsp;</a></span>setDriveMod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool setDriveMod </td>
          <td>(</td>
          <td class="paramtype">assignment::Service::Request &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">assignment::Service::Response &amp;&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to set the drive modality according to the user input. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req,res</td><td>respectively the request and response of the service</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean true or false</dd></dl>
<p>The function is used to set the drive modality according to the user input. Once the user enters an input inside the UI this is passed to the service node by a service: the request is used inside the switch case to set the modality. </p>

</div>
</div>
<a id="a890521a70172978804cdaf281c4b5058"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a890521a70172978804cdaf281c4b5058">&#9670;&nbsp;</a></span>setPoseParams()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setPoseParams </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>inX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>inY</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to set the goal of the robot. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">float</td><td>X and Y coordinates for the goal.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>The function takes as input the x and y value inserted by the user and set them as the target goal that the robot has to reach. It enters into the field ...position.x/y to set them, then sets the frame_id as map and the value of the quaternion module to 1 (all to 0 except w to 1). After having completed all these actions it publish the goal and set the variable G (the one to establish the presence of a goal) to true so that the robot can know there is a goal to be reached. </p>

</div>
</div>
<a id="a60a61cb42ee062b6782bcc39a63aa3bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60a61cb42ee062b6782bcc39a63aa3bf">&#9670;&nbsp;</a></span>takeStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void takeStatus </td>
          <td>(</td>
          <td class="paramtype">const move_base_msgs::MoveBaseActionFeedback::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to take the status: goal ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>message from which infos regarding the robot's position are taken</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>The function is set to keep periodically updated the current goal set: in particular the goal is periodically taken into a proper variable. Moreover, if there is a goal already set, checked through the variable G, and if the robot is sufficiently near the position speficied by the user input (x and y coordinates) then the goal is automatically deleted to avoid having it set even if the robot is not moving, thus saving memory space. </p>

</div>
</div>
<a id="a2c38b7bf238ee6a4bd51cfe140c3d87f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c38b7bf238ee6a4bd51cfe140c3d87f">&#9670;&nbsp;</a></span>takeVel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void takeVel </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::Twist::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to take the current velocity of the robot. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>message from which infos regarding the robot are taken</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>The function is used to read the robot's velocity. In particular the function checks if the manual modality of driving is enabled, throigh the manual global velocity; after that it also checks the presence of the driving assistance through a proper variable; at the end it stores the actual velocity of the robot into two different variables in order to have them available. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
